HOW TO RUN THE TESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPTION 1: Quick Standalone Test (Recommended First)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: test_correlation_quick.py
Advantage: Minimal dependencies, just validates the core system

Command:
  python test_correlation_quick.py

Expected Output:
  âœ… TEST 1: Correlation Strength Matrix
    âœ“ DVOA + Matchup = 1.5 (expected 1.5)
    âœ“ DVOA + GameScript = 1.3 (expected 1.3)
    ... (more tests)
  
  âœ… TEST 2: Penalty Calculations
    âœ“ DVOA + Matchup strength 1.5 â†’ penalty -7.5%
    ... (more tests)
  
  âœ… TEST 3: Emoji Indicators
    âœ“ Strength 1.5 â†’ ğŸ”¥ (expected ğŸ”¥)
    ... (more tests)
  
  âœ… TEST 4: System Integrity
    âœ“ get_correlation_strength method exists
    âœ“ calculate_correlation_risk method exists
    ... (more checks)
  
  âœ… ALL TESTS PASSED - System is ready!

Time: ~10 seconds


OPTION 2: Comprehensive Test Suite
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: test_correlation_strength_matrix.py
Advantage: Full validation with all 5 test modules

Command:
  python test_correlation_strength_matrix.py

Expected Output:
  TEST 1: Correlation Strength Matrix Calibration
    âœ“ DVOA + Matchup = 1.5 (Very Strong - same fundamental weakness)
    âœ“ DVOA + GameScript = 1.3 (Strong - game flow from weak defense)
    ... (9 total strength tests)
  
  TEST 2: Penalty Calculation Accuracy
    âœ“ DVOA+Matchup pair (strongest)
      Expected: -7.5% | Actual: -7.5%
    âœ“ DVOA+GameScript pair (strong)
      Expected: -6.5% | Actual: -6.5%
    ... (6 penalty tests)
  
  TEST 3: Emoji & Strength Indicators
    âœ“ 1.5 â†’ ğŸ”¥ (Very Strong)
    âœ“ 1.3 â†’ ğŸ”¥ (Very Strong)
    ... (7 emoji tests)
  
  TEST 4: Full Parlay Correlation Analysis
    3-Leg Parlay Analysis:
      Leg 1: Player1 (drivers: DVOA, Matchup)
      Leg 2: Player2 (drivers: DVOA, Volume)
      Leg 3: Player3 (drivers: Trend, Volume)
    
    Total Correlation Penalty: -10.0%
    
    Detected Correlations:
      1. [correlation detected]
      2. [correlation detected]
    
    âœ“ Expected total: -10.0% | Actual: -10.0%
  
  TEST 5: High Confidence Parlay Protection
    High-Confidence 3-Leg Parlay:
      Leg 1: 70% confidence (DVOA, Volume)
      Leg 2: 75% confidence (DVOA, Matchup)
      Leg 3: 68% confidence (GameScript, Trend)
    
    Base Parlay Confidence (pre-penalty): ~73%
    Correlation Penalty Applied: -9.0%
    Final Parlay Confidence (post-penalty): ~64%
    
    âœ“ Penalty is reasonable (not over-penalized)
  
  CALIBRATION GUIDE: Using Live Results to Refine Strengths
    [Full guide displayed]
  
  TEST SUMMARY
    âœ… PASS: TEST 1: Strength Matrix
    âœ… PASS: TEST 2: Penalty Calculations
    âœ… PASS: TEST 3: Emoji Indicators
    âœ… PASS: TEST 4: Full Parlay Analysis
    âœ… PASS: TEST 5: High Confidence Protection
  
  âœ… ALL TESTS PASSED! System is ready for integration.

Time: ~20 seconds


TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ERROR: ModuleNotFoundError: No module named 'scripts'
SOLUTION: Make sure you're running from the project root directory
  Command: cd C:\Users\scott\Desktop\nfl-betting-systemv2
  Then: python test_correlation_quick.py

ERROR: ImportError: cannot import name 'Prop'
SOLUTION: Already fixed! The models.py uses 'PlayerProp' not 'Prop'
  Status: âœ… Fixed in both test files

ERROR: No such file or directory
SOLUTION: Check file exists in the right location
  Verify: ls test_correlation_quick.py
  Should see the file in your nfl-betting-systemv2 directory

ERROR: Tests fail with AttributeError
SOLUTION: Check that correlation_detector.py is in scripts/analysis/
  Verify: ls scripts/analysis/correlation_detector.py
  Should exist after the rewrite


NEXT STEPS AFTER PASSING TESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Read the documentation:
   - PROJECT_3_IMPROVEMENT_1_QUICK_REFERENCE.txt (5 min)
   - PROJECT_3_IMPROVEMENT_1_INTEGRATION.md (20 min)

2. Integrate into your betting system:
   from scripts.analysis.correlation_detector import EnhancedParlayBuilder
   
   builder = EnhancedParlayBuilder()
   enhanced_parlays = builder.build_parlays_with_correlation(all_analyses)

3. Generate test parlays:
   - Create 10 sample parlays with new system
   - Verify correlation penalties look reasonable
   - Check emoji warnings (ğŸ”¥ âš ï¸ âš¡) appear correctly

4. Start tracking:
   from scripts.analysis.correlation_calibration_tracker import CorrelationCalibrationTracker
   
   tracker = CorrelationCalibrationTracker()
   tracker.log_parlay(parlay_id, correlation_types, result)


QUICK COMMANDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Test the quick validation:
  python test_correlation_quick.py

Test the comprehensive suite:
  python test_correlation_strength_matrix.py

Verify imports work:
  python -c "from scripts.analysis.correlation_detector import CorrelationAnalyzer; print('âœ“ Import successful')"

Check files exist:
  python -c "import os; print('correlation_detector:', os.path.exists('scripts/analysis/correlation_detector.py')); print('calibration_tracker:', os.path.exists('scripts/analysis/correlation_calibration_tracker.py'))"


EXPECTED SUCCESS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Both test files run without errors
âœ… All tests show âœ“ (check marks)
âœ… Strength values are accurate (DVOA+Matchup = 1.5, etc)
âœ… Penalties calculate correctly (-7.5% for DVOA+Matchup, etc)
âœ… Emoji indicators display properly (ğŸ”¥ âš ï¸ âš¡)
âœ… Final message: "ALL TESTS PASSED! System is ready for integration."


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Start with: python test_correlation_quick.py

This file provides everything you need to verify the implementation is working!
